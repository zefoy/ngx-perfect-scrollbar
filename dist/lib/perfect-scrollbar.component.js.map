{"version":3,"file":"perfect-scrollbar.component.js","sourceRoot":"","sources":["../../src/lib/perfect-scrollbar.component.ts"],"names":[],"mappings":"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","sourcesContent":["import 'rxjs/add/operator/throttleTime';\nimport 'rxjs/add/operator/distinctUntilChanged';\n\nimport { Subject } from 'rxjs/Subject';\nimport { Subscription } from 'rxjs/Subscription';\n\nimport { Component, ViewEncapsulation,\n  OnInit, OnDestroy, DoCheck, Input, Output,\n  ViewChild, EventEmitter, HostBinding, HostListener,\n  ElementRef, ChangeDetectorRef } from '@angular/core';\n\nimport { PerfectScrollbarDirective } from './perfect-scrollbar.directive';\nimport { PerfectScrollbarConfigInterface } from './perfect-scrollbar.interfaces';\n\n@Component({\n  selector: 'perfect-scrollbar',\n  templateUrl: './lib/perfect-scrollbar.component.html',\n  styleUrls: [ './lib/perfect-scrollbar.component.css' ],\n  encapsulation: ViewEncapsulation.None\n})\nexport class PerfectScrollbarComponent implements OnInit, OnDestroy, DoCheck {\n  public states: any = {};\n  public notify: boolean = null;\n\n  public userInteraction: boolean = false;\n  public allowPropagation: boolean = false;\n\n  private cancelEvent: Event = null;\n\n  private timeoutState: number = null;\n  private timeoutScroll: number = null;\n\n  private usePropagationX: boolean = false;\n  private usePropagationY: boolean = false;\n\n  private statesSub: Subscription = null;\n  private statesUpdate: Subject<string> = new Subject();\n\n  private activeSub: Subscription = null;\n  private activeUpdate: Subject<boolean> = new Subject();\n\n  @Input() disabled: boolean = false;\n\n  @Input() usePSClass: boolean = true;\n\n  @HostBinding('class.ps-show-limits')\n  @Input() autoPropagation: boolean = false;\n\n  @HostBinding('class.ps-show-active')\n  @Input() scrollIndicators: boolean = false;\n\n  @Input() config: PerfectScrollbarConfigInterface;\n\n  @ViewChild(PerfectScrollbarDirective) directiveRef: PerfectScrollbarDirective;\n\n  @HostListener('document:touchstart', ['$event']) onGeneratedEvent(event: any) {\n    // Stop the generated event from reaching window for PS to work correctly\n    if (event['psGenerated']) {\n      event.stopPropagation();\n    }\n  }\n\n  constructor(private cdRef: ChangeDetectorRef, private elementRef: ElementRef) {}\n\n  ngOnInit() {\n    this.activeSub = this.activeUpdate\n      .distinctUntilChanged()\n      .subscribe((active: boolean) => {\n        this.allowPropagation = active;\n      });\n\n    this.statesSub = this.statesUpdate\n      .distinctUntilChanged()\n      .subscribe((state: string) => {\n        window.clearTimeout(this.timeoutState);\n\n        if (state !== 'x' && state !== 'y') {\n          this.notify = true;\n\n          this.states[state] = true;\n\n          if (state === 'top') {\n            this.states.bottom = false;\n          } else if (state === 'bottom') {\n            this.states.top = false;\n          } else if (state === 'left') {\n            this.states.rights = false;\n          } else if (state === 'rights') {\n            this.states.left = false;\n          }\n\n          this.timeoutState = window.setTimeout(() => {\n            this.notify = false;\n\n            if (this.autoPropagation && this.userInteraction &&\n               ((!this.usePropagationX && (this.states.left || this.states.right)) ||\n               (!this.usePropagationY && (this.states.top || this.states.bottom))))\n            {\n              this.allowPropagation = true;\n            }\n\n            this.cdRef.markForCheck();\n          }, 300);\n        }Â else {\n          this.notify = false;\n\n          if (state === 'x') {\n            this.states.left = false;\n            this.states.right = false;\n          } else if (state === 'y') {\n            this.states.top = false;\n            this.states.bottom = false;\n          }\n\n          this.userInteraction = true;\n\n          if (this.autoPropagation &&\n            (!this.usePropagationX || !this.usePropagationY))\n          {\n            this.allowPropagation = false;\n\n            if (this.cancelEvent) {\n              this.elementRef.nativeElement.dispatchEvent(this.cancelEvent);\n\n              this.cancelEvent = null;\n            }\n          } else if (this.scrollIndicators) {\n            this.notify = true;\n\n            this.timeoutState = window.setTimeout(() => {\n              this.notify = false;\n\n              this.cdRef.markForCheck();\n            }, 300);\n          }\n        }\n\n        this.cdRef.markForCheck();\n        this.cdRef.detectChanges();\n      });\n  }\n\n  ngOnDestroy() {\n    if (this.activeSub) {\n      this.activeSub.unsubscribe();\n    }\n\n    if (this.statesSub) {\n      this.statesSub.unsubscribe();\n    }\n\n    if (this.timeoutState) {\n      window.clearTimeout(this.timeoutState);\n    }\n\n    if (this.timeoutScroll) {\n      window.clearTimeout(this.timeoutScroll);\n    }\n  }\n\n  ngDoCheck() {\n    if (!this.disabled && this.autoPropagation && this.directiveRef) {\n      const element = this.directiveRef.elementRef.nativeElement;\n\n      this.usePropagationX = !element.classList.contains('ps--active-x');\n      this.usePropagationY = !element.classList.contains('ps--active-y');\n\n      this.activeUpdate.next(this.usePropagationX && this.usePropagationY);\n    }\n  }\n\n  public getConfig(): PerfectScrollbarConfigInterface {\n    const config = this.config || {};\n\n    if (this.autoPropagation) {\n      config.swipePropagation = true;\n      config.wheelPropagation = true;\n    }\n\n    return config;\n  }\n\n  public onTouchEnd(event: Event = null) {\n    if (!this.disabled && this.autoPropagation &&\n       (!this.usePropagationX || !this.usePropagationY))\n    {\n      this.cancelEvent = null;\n\n      this.allowPropagation = false;\n    }\n  }\n\n  public onTouchMove(event: Event = null) {\n    if (!this.disabled && this.autoPropagation && !this.allowPropagation) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  public onTouchStart(event: Event = null) {\n    if (!this.disabled && this.autoPropagation) {\n      this.userInteraction = true;\n\n      if (this.allowPropagation) {\n        // PS stops the touchmove event so lets re-emit it here\n        if (this.elementRef.nativeElement) {\n          const newEvent = new MouseEvent('touchstart', event);\n          this.cancelEvent = new MouseEvent('touchmove', event);\n\n          newEvent['psGenerated'] = this.cancelEvent['psGenerated'] = true;\n          newEvent['touches'] = this.cancelEvent['touches'] = event['touches'];\n          newEvent['targetTouches'] = this.cancelEvent['targetTouches'] = event['targetTouches'];\n\n          this.elementRef.nativeElement.dispatchEvent(newEvent);\n        }\n      }\n\n      this.cdRef.detectChanges();\n    }\n  }\n\n  public onWheelEvent(event: Event = null) {\n    if (!this.disabled && this.autoPropagation) {\n      this.userInteraction = true;\n\n      if (!this.allowPropagation) {\n        event.preventDefault();\n        event.stopPropagation();\n      } else if (!this.usePropagationX || !this.usePropagationY) {\n        this.allowPropagation = false;\n      }\n\n      this.cdRef.detectChanges();\n    }\n  }\n\n  public onScrollEvent(event: Event = null, state: string) {\n    if (!this.disabled && (this.autoPropagation || this.scrollIndicators) &&\n       (!event || event.currentTarget === event.target))\n    {\n      this.statesUpdate.next(state);\n    }\n  }\n}\n"]}